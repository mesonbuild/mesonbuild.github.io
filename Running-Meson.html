<!DOCTYPE html>
<html lang="en">
<head>

<base href=".">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Running Meson</title>

<link rel="stylesheet" href="assets/css/custom_bootstrap.css" type="text/css">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/frontend.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">

<link rel="stylesheet" href="assets/css/prism-tomorrow.css" type="text/css">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/isotope.pkgd.min.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>

<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/trie.js"></script>
<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>

<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
" data-spy="scroll" data-target="#toc" data-offset="70">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<form class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/meson_logo.png" alt="Home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Modules <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="modules-menu">
					<li>
				<a href="Gnome-module.html">GNOME</a>
			</li>
					<li>
				<a href="i18n-module.html">i18n</a>
			</li>
					<li>
				<a href="Pkgconfig-module.html">Pkgconfig</a>
			</li>
					<li>
				<a href="Python-module.html">Python</a>
			</li>
					<li>
				<a href="Python-3-module.html">Python 3</a>
			</li>
					<li>
				<a href="Qt4-module.html">Qt4</a>
			</li>
					<li>
				<a href="Qt5-module.html">Qt5</a>
			</li>
					<li>
				<a href="RPM-module.html">RPM</a>
			</li>
					<li>
				<a href="Windows-module.html">Windows</a>
			</li>
					<li>
				<a href="Hotdoc-module.html">Hotdoc</a>
			</li>
			</ul>
</li>
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Quick References <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="quick-refs-menu">
					<li>
				<a href="Reference-manual.html">Functions</a>
			</li>
					<li>
				<a href="Build-options.html">Options</a>
			</li>
					<li>
				<a href="Configuration.html">Configuration</a>
			</li>
					<li>
				<a href="Dependencies.html">Dependencies</a>
			</li>
					<li>
				<a href="Unit-tests.html">Tests</a>
			</li>
					<li>
				<a href="Syntax.html">Syntax</a>
			</li>
			</ul>
</li>
			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
				<p><b>The Meson Build System</b></p>
			</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="Meson-documentation-1.0" data-hotdoc-ref="Running-Meson.html" class="page_container" id="page-wrapper">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/navigation.js"></script>
	<script src="assets/js/sitemap.js"></script>
</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-source="Running-Meson.md" data-hotdoc-role="main">
        <h1 id="running-meson">Running Meson</h1>
<p>There are two different ways of invoking Meson. First, you can run it directly
from the source tree with the command <code>/path/to/source/meson.py</code>. Meson may
also be installed in which case the command is simply <code>meson</code>. In this manual
we only use the latter format for simplicity.</p>
<p>Additionally, the invocation can pass options to meson. The list of options is
documented <a href="Builtin-options.html">here</a>.</p>
<p>At the time of writing only a command line version of Meson is available. This
means that Meson must be invoked using the terminal. If you wish to use the
MSVC compiler, you need to run Meson under "Visual Studio command prompt".</p>
<h2 id="configuring-the-build-directory">Configuring the build directory</h2>
<p>Let us assume that we have a source tree that has a Meson build system. This
means that at the topmost directory has a file called <code>meson.build</code>. We run the
following commands to get the build started.</p>
<pre><code class="language-sh">cd /path/to/source/root
meson setup builddir
</code></pre>
<p>We invoke Meson with the <code>setup</code> command, giving it the location of the build
directory. Meson uses <a href="http://voices.canonical.com/jussi.pakkanen/2013/04/16/why-you-should-consider-using-separate-build-directories/">out of source
builds</a>.</p>
<p>Hint: The syntax of meson is <code>meson [command] [arguments] [options]</code>. The
<code>setup</code> command takes a <code>builddir</code> and a <code>srcdir</code> argument. If no <code>srcdir</code> is
given Meson will deduce the <code>srcdir</code> based on <code>pwd</code> and the location of
<code>meson.build</code>.</p>
<p>Meson then loads the build configuration file and writes the corresponding
build backend in the build directory. By default Meson generates a <em>debug
build</em>, which turns on basic warnings and debug information and disables
compiler optimizations.</p>
<p>You can specify a different type of build with the <code>--buildtype</code> command line
argument. It can have one of the following values.</p>
<table>
<thead>
<tr>
<th> value</th>
<th> meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td> <code>plain</code>
</td>
<td> no extra build flags are used, even for compiler warnings, useful for distro packagers and other cases where you need to specify all arguments by yourself</td>
</tr>
<tr>
<td> <code>debug</code>
</td>
<td> debug info is generated but the result is not optimized, this is the default</td>
</tr>
<tr>
<td> <code>debugoptimized</code>
</td>
<td> debug info is generated and the code is optimized (on most compilers this means <code>-g -O2</code>)</td>
</tr>
<tr>
<td> <code>release</code>
</td>
<td> full optimization, no debug info</td>
</tr>
</tbody>
</table>
<p>The build directory is mandatory. The reason for this is that it simplifies the
build process immensely. Meson will not under any circumstances write files
inside the source directory (if it does, it is a bug and should be fixed). This
means that the user does not need to add a bunch of files to their revision
control's ignore list. It also means that you can create arbitrarily many build
directories for any given source tree.</p>
<p>For example, if we wanted to test building the source code with the Clang
compiler instead of the system default, we could just type the following
commands:</p>
<pre><code class="language-sh">cd /path/to/source/root
CC=clang CXX=clang++ meson setup buildclang
</code></pre>
<p>This separation is even more powerful if your code has multiple configuration
options (such as multiple data backends). You can create a separate
subdirectory for each of them. You can also have build directories for
optimized builds, code coverage, static analysis and so on. They are all neatly
separated and use the same source tree. Changing between different
configurations is just a question of changing to the corresponding directory.</p>
<p>Unless otherwise mentioned, all following command line invocations are meant to
be run in the source directory.</p>
<p>By default Meson will use the Ninja backend to build your project. If you wish
to use any of the other backends, you need to pass the corresponding argument
during configuration time. As an example, here is how you would use Meson to
generate a Visual studio solution.</p>
<pre><code class="language-sh">meson setup &lt;build dir&gt; --backend=vs2010
</code></pre>
<p>You can then open the generated solution with Visual Studio and compile it in
the usual way. A list of backends can be obtained with <code>meson setup --help</code>.</p>
<h2 id="environment-variables">Environment variables</h2>
<p>Sometimes you want to add extra compiler flags, this can be done by passing
them in environment variables when calling meson. See <a href="Reference-tables.html#compiler-and-linker-flag-envrionment-variables">the reference
tables</a> for
a list of all the environment variables. Be aware however these environment
variables are only used for the native compiler and will not affect the
compiler used for cross-compiling, where the flags specified in the cross file
will be used.</p>
<p>Furthermore it is possible to stop meson from adding flags itself by using the
<code>--buildtype=plain</code> option, in this case you must provide the full compiler and
linker arguments needed.</p>
<h2 id="building-from-the-source">Building from the source</h2>
<p>If you are not using an IDE, Meson uses the <a href="https://ninja-build.org/">Ninja build
system</a> to actually build the code. To start the
build, simply type the following command.</p>
<pre><code class="language-sh">ninja -C builddir
</code></pre>
<p>The main usability difference between Ninja and Make is that Ninja will
automatically detect the number of CPUs in your computer and parallelize itself
accordingly. You can override the amount of parallel processes used with the
command line argument <code>-j &lt;num processes&gt;</code>.</p>
<p>It should be noted that after the initial configure step <code>ninja</code> is the only
command you ever need to type to compile. No matter how you alter your source
tree (short of moving it to a completely new location), Meson will detect the
changes and regenerate itself accordingly. This is especially handy if you have
multiple build directories. Often one of them is used for development (the
"debug" build) and others only every now and then (such as a "static analysis"
build). Any configuration can be built just by <code>cd</code>'ing to the corresponding
directory and running Ninja.</p>
<h2 id="running-tests">Running tests</h2>
<p>Meson provides native support for running tests. The command to do that is
simple.</p>
<pre><code class="language-sh">ninja -C builddir test
</code></pre>
<p>Meson does not force the use of any particular testing framework. You are free
to use GTest, Boost Test, Check or even custom executables.</p>
<h2 id="installing">Installing</h2>
<p>Installing the built software is just as simple.</p>
<pre><code class="language-sh">ninja -C builddir install
</code></pre>
<p>Note that Meson will only install build targets explicitly tagged as
installable, as detailed in the <a href="Installing.html">installing targets
documentation</a>.</p>
<p>By default Meson installs to <code>/usr/local</code>. This can be changed by passing the
command line argument <code>--prefix /your/prefix</code> to Meson during configure time.
Meson also supports the <code>DESTDIR</code> variable used in e.g. building packages. It
is used like this:</p>
<pre><code class="language-sh">DESTDIR=/path/to/staging ninja -C builddir install
</code></pre>
<h2 id="command-line-help">Command line help</h2>
<p>Meson has a standard command line help feature. It can be accessed with the
following command.</p>
<pre><code>meson --help
</code></pre>
<h2 id="exit-status">Exit status</h2>
<p>Meson exits with status 0 if successful, 1 for problems with the command line
or meson.build file, and 2 for internal errors.</p>

    </div>
        




		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<div id="footer">
		    

	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		<a href="https://github.com/mesonbuild/meson//edit/master/docs/markdown/Running-Meson.md" data-hotdoc-role="edit-button">Edit on github</a>

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>


<script src="assets/js/navbar_offset_scroller.js"></script>
</body>
</html>
