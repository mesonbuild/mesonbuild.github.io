fragment_downloaded_cb({"url":"Unity-builds.html#unity-builds","fragment":"Unity builds\nUnity builds are a technique for cutting down build times. The way it\nworks is relatively straightforward. Suppose we have source files\nsrc1.c, src2.c and src3.c. Normally we would run the compiler\nthree times, once for each file. In a unity build we instead compile\nall these sources in a single unit. The simplest approach is to create\na new source file that looks like this.\nThis is then compiled rather than the individual files. The exact\nspeedup depends on the code base, of course, but it is not uncommon to\nobtain more than 50% speedup in compile times. This happens even\nthough the Unity build uses only one CPU whereas individual compiles\ncan be run in parallel. Unity builds can also lead to faster code,\nbecause the compiler can do more aggressive optimizations (e.g.\ninlining).\nThe downside is that incremental builds are as slow as full rebuilds\n(because that is what they are). Unity compiles also use more memory,\nwhich may become an issue in certain scenarios. There may also be some\nbugs in the source that need to be fixed before Unity compiles work.\nAs an example, if both src1.c and src2.c contain a static function\nor variable of the same name, there will be a clash.\nMeson has built-in support for unity builds. To enable them, just pass\n--unity on on the command line or enable unity builds in you project\ndefault_options.\nNo code changes are necessary apart from the potential clash issue\ndiscussed above. Meson will automatically generate all the necessary\ninclusion files for you.\nYou may modify unity settings for a given build target using\nthe override_options parameter. This may be useful when a build\ntarget is not compatible with unity build.\nThe unity option can also have the value subprojects, to build\nsubprojects with unity, while building the main project incrementally.\nThe unity_size option allows to specify the number of source files\nincluded per unity file. The default is 4. Having more source files\nper unity file will speed up full builds, but slow down incremental\nbuilds. To get only one unity file per build target, you can use\na very big number for unity_size.\n"});