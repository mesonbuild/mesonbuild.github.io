<!DOCTYPE html>
<html lang="en">
<head>

<base href=".">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Installing</title>

<link rel="stylesheet" href="assets/css/dark-frontend.css" type="text/css" title="dark">
<link rel="alternate stylesheet" href="assets/css/light-frontend.css" type="text/css" title="light">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">
<link rel="stylesheet" href="assets/js/search/enable_search.css" type="text/css">

<link rel="stylesheet" href="assets/css/notes.css" type="text/css">
<link rel="stylesheet" href="assets/css/devhelp.css" type="text/css">

<link rel="stylesheet" href="assets/css/prism-tomorrow.css" type="text/css" title="dark">

<link rel="alternate stylesheet" href="assets/css/prism.css" type="text/css" title="light">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>
<script src="assets/js/styleswitcher.js"></script>

<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/prism-keep-markup.js"></script>
<script src="assets/js/trie.js"></script>

<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<span title="light mode switch" class="glyphicon glyphicon-sunglasses pull-right" id="lightmode-icon"></span>
			<form class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/meson_logo.png" alt="Home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
  <a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Modules <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" id="modules-menu">
        <li>
            <a href="CMake-module.html">CMake</a>
        </li>
        <li>
            <a href="Cuda-module.html">CUDA</a>
        </li>
        <li>
            <a href="Dlang-module.html">Dlang</a>
        </li>
        <li>
            <a href="External-Project-module.html">External Project</a>
        </li>
        <li>
            <a href="Fs-module.html">Filesystem</a>
        </li>
        <li>
            <a href="Gnome-module.html">GNOME</a>
        </li>
        <li>
            <a href="Hotdoc-module.html">Hotdoc</a>
        </li>
        <li>
            <a href="i18n-module.html">i18n</a>
        </li>
        <li>
            <a href="Icestorm-module.html">Icestorm</a>
        </li>
        <li>
            <a href="Java-module.html">Java</a>
        </li>
        <li>
            <a href="Keyval-module.html">Keyval</a>
        </li>
        <li>
            <a href="Pkgconfig-module.html">Pkgconfig</a>
        </li>
        <li>
            <a href="Python-3-module.html">Python 3</a>
        </li>
        <li>
            <a href="Python-module.html">Python</a>
        </li>
        <li>
            <a href="Qt4-module.html">Qt4</a>
        </li>
        <li>
            <a href="Qt5-module.html">Qt5</a>
        </li>
        <li>
            <a href="Qt6-module.html">Qt6</a>
        </li>
        <li>
            <a href="Rust-module.html">Rust</a>
        </li>
        <li>
            <a href="Simd-module.html">Simd</a>
        </li>
        <li>
            <a href="SourceSet-module.html">SourceSet</a>
        </li>
        <li>
            <a href="Wayland-module.html">Wayland</a>
        </li>
        <li>
            <a href="Windows-module.html">Windows</a>
        </li>
	</ul>
</li>
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Quick References <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="quick-refs-menu">
					<li>
				<a href="Reference-manual.html">Functions</a>
			</li>
					<li>
				<a href="Build-options.html">Options</a>
			</li>
					<li>
				<a href="Configuration.html">Configuration</a>
			</li>
					<li>
				<a href="Dependencies.html">Dependencies</a>
			</li>
					<li>
				<a href="Unit-tests.html">Tests</a>
			</li>
					<li>
				<a href="Syntax.html">Syntax</a>
			</li>
			</ul>
</li>
			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
				<p><b>The Meson Build System</b></p>
			</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="Meson-documentation" data-hotdoc-ref="Installing.html" class="page_container" id="page-wrapper">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/full-width.js"></script>
  <div id="sitenav-wrapper">
    <iframe src="hotdoc-sitemap.html" id="sitenav-frame"></iframe>
  </div>
</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-role="main">
        <h1 id="installing">Installing</h1>
<p>Invoked via the <a href="Commands.html#install">following command</a> <em>(available
since 0.47.0)</em>:</p>
<pre><code class="language-sh">meson install
</code></pre>
<p>or alternatively (on older Meson versions with <code>ninja</code> backend):</p>
<pre><code class="language-sh">ninja install
</code></pre>
<p>By default Meson will not install anything. Build targets can be
installed by tagging them as installable in the definition.</p>
<pre><code class="language-meson">project('install', 'c')
shared_library('mylib', 'libfile.c', install : true)
</code></pre>
<p>There is usually no need to specify install paths or the like. Meson
will automatically install it to the standards-conforming location. In
this particular case the executable is installed to the <code>bin</code>
subdirectory of the install prefix. However if you wish to override
the install dir, you can do that with the <code>install_dir</code> argument.</p>
<pre><code class="language-meson">executable('prog', 'prog.c', install : true, install_dir : 'my/special/dir')
</code></pre>
<p>Other install commands are the following.</p>
<pre><code class="language-meson">install_headers('header.h', subdir : 'projname') # -&gt; include/projname/header.h
install_man('foo.1') # -&gt; share/man/man1/foo.1
install_data('datafile.dat', install_dir : get_option('datadir') / 'progname')
# -&gt; share/progname/datafile.dat
</code></pre>
<p><code>install_data()</code> supports rename of the file <em>since 0.46.0</em>.</p>
<pre><code class="language-meson"># file.txt -&gt; {datadir}/{projectname}/new-name.txt
install_data('file.txt', rename : 'new-name.txt')

# file1.txt -&gt; share/myapp/dir1/data.txt
# file2.txt -&gt; share/myapp/dir2/data.txt
install_data(['file1.txt', 'file2.txt'],
             rename : ['dir1/data.txt', 'dir2/data.txt'],
             install_dir : 'share/myapp')
</code></pre>
<p>Sometimes you want to copy an entire subtree directly. For this use
case there is the <code>install_subdir</code> command, which can be used like
this.</p>
<pre><code class="language-meson">install_subdir('mydir', install_dir : 'include') # mydir subtree -&gt; include/mydir
</code></pre>
<p>Most of the time you want to install files relative to the install
prefix. Sometimes you need to go outside of the prefix (such as writing
files to <code>/etc</code> instead of <code>/usr/etc</code>. This can be accomplished by
giving an absolute install path.</p>
<pre><code class="language-meson">install_data(sources : 'foo.dat', install_dir : '/etc') # -&gt; /etc/foo.dat
</code></pre>
<h2 id="custom-install-script">Custom install script</h2>
<p>Sometimes you need to do more than just install basic targets. Meson
makes this easy by allowing you to specify a custom script to execute
at install time. As an example, here is a script that generates an
empty file in a custom directory.</p>
<pre><code class="language-bash">#!/bin/sh

mkdir "${DESTDIR}/${MESON_INSTALL_PREFIX}/mydir"
touch "${DESTDIR}/${MESON_INSTALL_PREFIX}/mydir/file.dat"
</code></pre>
<p>As you can see, Meson sets up some environment variables to help you
write your script (<code>DESTDIR</code> is not set by Meson, it is inherited from
the outside environment). In addition to the install prefix, Meson
also sets the variables <code>MESON_SOURCE_ROOT</code> and <code>MESON_BUILD_ROOT</code>.</p>
<p>Telling Meson to run this script at install time is a one-liner.</p>
<pre><code class="language-meson"><a href="Reference-manual_builtin_meson.html#mesonadd_install_script"><ins>meson.add_install_script</ins></a>('myscript.sh')
</code></pre>
<p>The argument is the name of the script file relative to the current
subdirectory.</p>
<h2 id="installing-as-the-superuser">Installing as the superuser</h2>
<p>When building as a non-root user, but installing to root-owned locations via
e.g. <code>sudo ninja install</code>, ninja will attempt to rebuild any out of date
targets as root. This results in various bad behaviors due to build outputs and
ninja internal files being owned by root.</p>
<p>Running <code>meson install</code> is preferred for several reasons. It can rebuild out of
date targets and then re-invoke itself as root. <em>(since 1.1.0)</em> Additionally,
running <code>sudo meson install</code> will drop permissions and rebuild out of date
targets as the original user, not as root.</p>
<p><em>(since 1.1.0)</em> Re-invoking as root will try to guess the user's preferred method for
re-running commands as root. The order of precedence is: sudo, doas, run0, pkexec
(polkit). An elevation tool can be forced by setting <code>$MESON_ROOT_CMD</code>.</p>
<h2 id="destdir-support">DESTDIR support</h2>
<p>Sometimes you need to install to a different directory than the
install prefix. This is most common when building rpm or deb
packages. This is done with the <code>DESTDIR</code> environment variable and it
is used just like with other build systems:</p>
<pre><code class="language-console">$ DESTDIR=/path/to/staging/area meson install
</code></pre>
<p>Since <em>0.57.0</em> <code>--destdir</code> argument can be used instead of environment. In that
case Meson will set <code>DESTDIR</code> into environment when running install scripts.</p>
<p>Since <em>0.60.0</em> <code>DESTDIR</code> and <code>--destdir</code> can be a path relative to build
directory. An absolute path will be set into environment when executing scripts.</p>
<h2 id="custom-install-behaviour">Custom install behaviour</h2>
<p>Installation behaviour can be further customized using additional
arguments.</p>
<p>For example, if you wish to install the current setup without
rebuilding the code (which the default install target always does) and
only installing those files that have changed, you would run this
command in the build tree:</p>
<pre><code class="language-console">$ meson install --no-rebuild --only-changed
</code></pre>
<h2 id="installation-tags">Installation tags</h2>
<p><em>Since 0.60.0</em></p>
<p>It is possible to install only a subset of the installable files using
<code>meson install --tags tag1,tag2</code> command line. When <code>--tags</code> is specified, only
files that have been tagged with one of the tags are going to be installed.</p>
<p>This is intended to be used by packagers (e.g. distributions) who typically
want to split <code>libfoo</code>, <code>libfoo-dev</code> and <code>libfoo-doc</code> packages. Instead of
duplicating the list of installed files per category in each packaging system,
it can be maintained in a single place, directly in upstream <code>meson.build</code> files.</p>
<p>Meson sets predefined tags on some files. More tags are likely to be added over
time, please help extending the list of well known categories.</p>
<ul>
<li>
<code>devel</code>:
<ul>
<li>
<a href="Reference-manual_functions.html#static_library"><ins><code>static_library()</code></ins></a>,</li>
<li>
<a href="Reference-manual_functions.html#install_headers"><ins><code>install_headers()</code></ins></a>,</li>
<li>
<code>pkgconfig.generate()</code>,</li>
<li>
<code>gnome.generate_gir()</code> - <code>.gir</code> file,</li>
<li>
<code>gnome.generate_vapi()</code> - <code>.vapi</code> file (<em>Since 0.64.0</em>),</li>
<li>Files installed into <code>libdir</code> and with <code>.a</code> or <code>.pc</code> extension,</li>
<li>File installed into <code>includedir</code>,</li>
<li>Generated header files installed with <code>gnome.compile_resources()</code>,
<code>gnome.genmarshal()</code>, <code>gnome.mkenums()</code>, <code>gnome.mkenums_simple()</code>
and <code>gnome.gdbus_codegen()</code> (<em>Since 0.64.0</em>).</li>
</ul>
</li>
<li>
<code>runtime</code>:
<ul>
<li>
<a href="Reference-manual_functions.html#executable"><ins><code>executable()</code></ins></a>,</li>
<li>
<a href="Reference-manual_functions.html#shared_library"><ins><code>shared_library()</code></ins></a>,</li>
<li>
<a href="Reference-manual_functions.html#shared_module"><ins><code>shared_module()</code></ins></a>,</li>
<li>
<a href="Reference-manual_functions.html#jar"><ins><code>jar()</code></ins></a>,</li>
<li>
<code>gnome.compile_resources()</code> - <code>.gresource</code> file (<em>Since 0.64.0</em>),</li>
<li>Files installed into <code>bindir</code>,</li>
<li>Files installed into <code>libdir</code> and with <code>.so</code> or <code>.dll</code> extension.</li>
</ul>
</li>
<li>
<code>python-runtime</code>:
<ul>
<li>
<code>python.install_sources()</code>.</li>
</ul>
</li>
<li>
<code>man</code>:
<ul>
<li>
<a href="Reference-manual_functions.html#install_man"><ins><code>install_man()</code></ins></a>.</li>
</ul>
</li>
<li>
<code>doc</code>:
<ul>
<li>
<code>gnome.gtkdoc()</code>,</li>
<li>
<code>gnome.yelp()</code>,</li>
<li>
<code>hotdoc.generate_doc()</code>.</li>
</ul>
</li>
<li>
<code>i18n</code>:
<ul>
<li>
<code>i18n.gettext()</code>,</li>
<li>
<code>qt.compile_translations()</code>,</li>
<li>Files installed into <code>localedir</code>.</li>
</ul>
</li>
<li>
<code>typelib</code>:
<ul>
<li>
<code>gnome.generate_gir()</code> - <code>.typelib</code> file.</li>
</ul>
</li>
<li>
<code>bin</code>:
<ul>
<li>Scripts and executables bundled with a library meant to be used by end
users.</li>
</ul>
</li>
<li>
<code>bin-devel</code>:
<ul>
<li>Scripts and executables bundled with a library meant to be used by
developers (i.e. build tools).</li>
</ul>
</li>
<li>
<code>tests</code>:
<ul>
<li>Files installed into <code>installed-tests</code> subdir (<em>Since 0.64.0</em>).</li>
</ul>
</li>
<li>
<code>systemtap</code>:
<ul>
<li>Files installed into <code>systemtap</code> subdir (<em>Since 0.64.0</em>).</li>
</ul>
</li>
</ul>
<p>Custom installation tag can be set using the <code>install_tag</code> keyword argument
on various functions such as <a href="Reference-manual_functions.html#custom_target"><ins><code>custom_target()</code></ins></a>, <a href="Reference-manual_functions.html#configure_file"><ins><code>configure_file()</code></ins></a>,
<a href="Reference-manual_functions.html#install_subdir"><ins><code>install_subdir()</code></ins></a> and <a href="Reference-manual_functions.html#install_data"><ins><code>install_data()</code></ins></a>. See their respective documentation
in the reference manual for details. It is recommended to use one of the
predefined tags above when possible.</p>
<p>Installable files that have not been tagged either automatically by Meson, or
manually using <code>install_tag</code> keyword argument won't be installed when <code>--tags</code>
is used. They are reported at the end of <code>&lt;builddir&gt;/meson-logs/meson-log.txt</code>,
it is recommended to add missing <code>install_tag</code> to have a tag on each installable
files.</p>

    </div>
        




		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<div id="footer">
		    
        
<hr>

<div class="license-description">
    Website licensing information are available on the <a href="legal.html">Legal</a> page.
</div>


	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		<a href="https://github.com/mesonbuild/meson/edit/master/docs/markdown/Installing.md" data-hotdoc-role="edit-button">Edit on GitHub</a>

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>


<script src="assets/js/navbar_offset_scroller.js"></script>
</body>
</html>
