<!DOCTYPE html>
<html lang="en">
<head>

<base href=".">

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Release 1.3.0 (in development)</title>

<link rel="stylesheet" href="assets/css/dark-frontend.css" type="text/css" title="dark">
<link rel="alternate stylesheet" href="assets/css/light-frontend.css" type="text/css" title="light">
<link rel="stylesheet" href="assets/css/bootstrap-toc.min.css" type="text/css">
<link rel="stylesheet" href="assets/css/jquery.mCustomScrollbar.min.css">
<link rel="stylesheet" href="assets/js/search/enable_search.css" type="text/css">


<link rel="stylesheet" href="assets/css/prism-tomorrow.css" type="text/css" title="dark">

<link rel="alternate stylesheet" href="assets/css/prism.css" type="text/css" title="light">

<script src="assets/js/mustache.min.js"></script>
<script src="assets/js/jquery.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/scrollspy.js"></script>
<script src="assets/js/typeahead.jquery.min.js"></script>
<script src="assets/js/search.js"></script>
<script src="assets/js/compare-versions.js"></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="assets/js/bootstrap-toc.min.js"></script>
<script src="assets/js/jquery.touchSwipe.min.js"></script>
<script src="assets/js/anchor.min.js"></script>
<script src="assets/js/tag_filtering.js"></script>
<script src="assets/js/language_switching.js"></script>
<script src="assets/js/styleswitcher.js"></script>

<script src="assets/js/lines_around_headings.js"></script>

<script src="assets/js/prism-core.js"></script>
<script src="assets/js/prism-autoloader.js"></script>
<script src="assets/js/prism_autoloader_path_override.js"></script>
<script src="assets/js/prism-keep-markup.js"></script>
<script src="assets/js/trie.js"></script>

<link rel="icon" type="image/png" href="assets/images/favicon.png">
<link rel="shortcut icon" href="assets/images/favicon.png">

</head>

<body class="no-script
">

<script>
$('body').removeClass('no-script');
</script>

<nav class="navbar navbar-fixed-top navbar-default" id="topnav">
	<div class="container-fluid">
		<div class="navbar-right">
			<a id="toc-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-wrapper" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<span title="light mode switch" class="glyphicon glyphicon-sunglasses pull-right" id="lightmode-icon"></span>
			<form class="navbar-form pull-right" id="navbar-search-form">
                               <div class="form-group has-feedback">
                                       <input type="text" class="form-control input-sm" name="search" id="sidenav-lookup-field" placeholder="search" disabled>
				       <span class="glyphicon glyphicon-search form-control-feedback" id="search-mgn-glass"></span>
                               </div>
                        </form>
		</div>
		<div class="navbar-header">
			<a id="sidenav-toggle">
				<span class="glyphicon glyphicon-menu-right"></span>
				<span class="glyphicon glyphicon-menu-left"></span>
			</a>
			<a id="home-link" href="index.html" class="hotdoc-navbar-brand">
				<img src="assets/images/meson_logo.png" alt="Home">
			</a>
		</div>
		<div class="navbar-collapse collapse" id="navbar-wrapper">
			<ul class="nav navbar-nav" id="menu">
				
<li class="dropdown">
  <a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Modules <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" id="modules-menu">
        <li>
            <a href="CMake-module.html">CMake</a>
        </li>
        <li>
            <a href="Cuda-module.html">CUDA</a>
        </li>
        <li>
            <a href="Dlang-module.html">Dlang</a>
        </li>
        <li>
            <a href="External-Project-module.html">External Project</a>
        </li>
        <li>
            <a href="Fs-module.html">Filesystem</a>
        </li>
        <li>
            <a href="Gnome-module.html">GNOME</a>
        </li>
        <li>
            <a href="Hotdoc-module.html">Hotdoc</a>
        </li>
        <li>
            <a href="i18n-module.html">i18n</a>
        </li>
        <li>
            <a href="Icestorm-module.html">Icestorm</a>
        </li>
        <li>
            <a href="Java-module.html">Java</a>
        </li>
        <li>
            <a href="Keyval-module.html">Keyval</a>
        </li>
        <li>
            <a href="Pkgconfig-module.html">Pkgconfig</a>
        </li>
        <li>
            <a href="Python-3-module.html">Python 3</a>
        </li>
        <li>
            <a href="Python-module.html">Python</a>
        </li>
        <li>
            <a href="Qt4-module.html">Qt4</a>
        </li>
        <li>
            <a href="Qt5-module.html">Qt5</a>
        </li>
        <li>
            <a href="Qt6-module.html">Qt6</a>
        </li>
        <li>
            <a href="Rust-module.html">Rust</a>
        </li>
        <li>
            <a href="Simd-module.html">Simd</a>
        </li>
        <li>
            <a href="SourceSet-module.html">SourceSet</a>
        </li>
        <li>
            <a href="Wayland-module.html">Wayland</a>
        </li>
        <li>
            <a href="Windows-module.html">Windows</a>
        </li>
	</ul>
</li>
<li class="dropdown">
	<a class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
		Quick References <span class="caret"></span>
	</a>
	<ul class="dropdown-menu" id="quick-refs-menu">
					<li>
				<a href="Reference-manual.html">Functions</a>
			</li>
					<li>
				<a href="Build-options.html">Options</a>
			</li>
					<li>
				<a href="Configuration.html">Configuration</a>
			</li>
					<li>
				<a href="Dependencies.html">Dependencies</a>
			</li>
					<li>
				<a href="Unit-tests.html">Tests</a>
			</li>
					<li>
				<a href="Syntax.html">Syntax</a>
			</li>
			</ul>
</li>
			</ul>
			<div class="hidden-xs hidden-sm navbar-text navbar-center">
				<p><b>The Meson Build System</b></p>
			</div>
		</div>
	</div>
</nav>

<main>
<div data-extension="core" data-hotdoc-in-toplevel="True" data-hotdoc-project="Meson-documentation" data-hotdoc-ref="Release-notes-for-1-3-0.html" class="page_container" id="page-wrapper">
<script src="assets/js/utils.js"></script>

<div class="panel panel-collapse oc-collapsed" id="sidenav" data-hotdoc-role="navigation">
	<script src="assets/js/full-width.js"></script>
  <div id="sitenav-wrapper">
    <iframe src="hotdoc-sitemap.html" id="sitenav-frame"></iframe>
  </div>
</div>

<div id="body">
	<div id="main">
				    <div id="page-description" data-hotdoc-role="main">
        <h1 id="new-features-in-development">New features (in development)</h1>
<h2 id="clarify-of-implicitlyincluded-headers-in-clike-compiler-checks">Clarify of implicitly-included headers in C-like compiler checks</h2>
<p>Compiler check methods <code>compiler.compute_int()</code>, <code>compiler.alignment()</code>
and <code>compiler.sizeof()</code> now have their implicitly-included headers
corrected and documented.</p>
<p><code>&lt;stdio.h&gt;</code> was included unintentionally when cross-compiling, which
is less than ideal because there is no guarantee that a standard library
is available for the target platform. Only <code>&lt;stddef.h&gt;</code> is included instead.</p>
<p>For projects that depend on the old behavior, the compiler check methods
have an optional argument <code>prefix</code>, which can be used to specify additional
<code>#include</code> directives.</p>
<h2 id="treat-warnings-as-error-in-compiler-checks">Treat warnings as error in compiler checks</h2>
<p>Compiler check methods <code>compiler.compiles()</code>, <code>compiler.links()</code> and <code>compiler.run()</code>
now have a new <code>werror: true</code> keyword argument to treat compiler warnings as error.
This can be used to check if code compiles without warnings.</p>
<h2 id="compilers-now-have-a-has_define-method">Compilers now have a <code>has_define</code> method</h2>
<p>This method returns true if the given preprocessor symbol is
defined, else false is returned. This is useful is cases where
an empty define has to be distinguished from a non-set one, which
is not possible using <code>get_define</code>.</p>
<p>Additionally it makes intent clearer for code that only needs
to check if a specific define is set at all and does not care
about its value.</p>
<h2 id="configure_file-now-has-a-macro_name-parameter">
<a href="Reference-manual_functions.html#configure_file"><ins><code>configure_file()</code></ins></a> now has a <code>macro_name</code> parameter.</h2>
<p>This new paramater, <code>macro_name</code> allows C macro-style include guards to be added
to <a href="Reference-manual_functions.html#configure_file"><ins><code>configure_file()</code></ins></a>'s output when a template file is not given. This change
simplifies the creation of configure files that define macros with dynamic names
and want the C-style include guards.</p>
<h2 id="c_std-and-cpp_std-options-now-accepts-a-list-of-values">
<code>c_std</code> and <code>cpp_std</code> options now accepts a list of values</h2>
<p>Projects that prefer GNU C, but can fallback to ISO C, can now set, for
example, <code>default_options: 'c_std=gnu11,c11'</code>, and it will use <code>gnu11</code> when
available, but fallback to <code>c11</code> otherwise. It is an error only if none of the
values are supported by the current compiler.</p>
<p>Likewise, a project that can take benefit of <code>c++17</code> but can still build with
<code>c++11</code> can set <code>default_options: 'cpp_std=c++17,c++11'</code>.</p>
<p>This allows us to deprecate <code>gnuXX</code> values from the MSVC compiler. That means
that <code>default_options: 'c_std=gnu11'</code> will now print a warning with MSVC
but fallback to <code>c11</code>. No warning is printed if at least one
of the values is valid, i.e. <code>default_options: 'c_std=gnu11,c11'</code>.</p>
<p>In the future that deprecation warning will become an hard error because
<code>c_std=gnu11</code> should mean GNU is required, for projects that cannot be
built with MSVC for example.</p>
<h2 id="more-meaningful-description-of-many-generative-tasks">More meaningful description of many generative tasks</h2>
<p>When a module uses a <code>CustomTarget</code> to process files, it now has the possibility
to customize the message displayed by ninja.</p>
<p>Many modules were updated to take advantage of this new feature.</p>
<h2 id="deprecate-jar-as-a-build_target-type">Deprecate 'jar' as a build_target type</h2>
<p>The point of <code>build_target()</code> is that what is produced can be conditionally
changed. However, <code>jar()</code> has a significant number of non-overlapping arguments
from other build_targets, including the kinds of sources it can include. Because
of this crafting a <code>build_target</code> that can be used as a Jar and as something
else is incredibly hard to do. As such, it has been deprecated, and using
<code>jar()</code> directly is recommended.</p>
<h2 id="generatorprocess-gains-env-keyword-argument">generator.process() gains 'env' keyword argument</h2>
<p>Like the kwarg of the same name in <code>custom_target()</code>, <code>env</code> allows
you to set the environment in which the generator will process inputs.</p>
<h2 id="target-names-for-executables-now-take-into-account-suffixes">Target names for executables now take into account suffixes.</h2>
<p>In previous versions of meson, a <code>meson.build</code> file like this:</p>
<pre><code>exectuable('foo', 'main.c')
exectuable('foo', 'main.c', name_suffix: 'bar')
</code></pre>
<p>would result in a configure error because meson internally used
the same id for both executables. This build file is now allowed
since meson takes into account the <code>bar</code> suffix when generating the
second executable. This allows for executables with the same basename
but different suffixes to be built in the same subdirectory.</p>
<h2 id="executable-gains-vs_module_defs-keyword">Executable gains vs_module_defs keyword</h2>
<p>This allows using a .def file to control which functions an <a href="Reference-manual_functions.html#executable"><ins><code>executable()</code></ins></a> will
expose to a <a href="Reference-manual_functions.html#shared_module"><ins><code>shared_module()</code></ins></a>.</p>
<h2 id="find_program-now-supports-the-default_options-argument">find_program() now supports the 'default_options' argument</h2>
<p>In a similar fashion as dependency(), find_program() now also allows you to set default
options for the subproject that gets built in case of a fallback.</p>
<h2 id="fsrelative_to"><code>fs.relative_to()</code></h2>
<p>The <code>fs</code> module now has a <code>relative_to</code> method. The method will return the
relative path from argument one to argument two, if one exists. Otherwise, the
absolute path to argument one is returned.</p>
<pre><code class="language-meson">assert(fs.relative_to('c:\\prefix\\lib', 'c:\\prefix\\bin') == '..\\lib')
assert(fs.relative_to('c:\\proj1\\foo', 'd:\\proj1\\bar') == 'c:\\proj1\\foo')
assert(fs.relative_to('prefix\\lib\\foo', 'prefix') == 'lib\\foo')

assert(fs.relative_to('/prefix/lib', '/prefix/bin') == '../lib')
assert(fs.relative_to('prefix/lib/foo', 'prefix') == 'lib/foo')
</code></pre>
<p>In addition to strings, it can handle files, custom targets, custom target
indices, and build targets.</p>
<h2 id="added-follow_symlinks-arg-to-install_data-install_header-and-install_subdir">Added follow_symlinks arg to install_data, install_header, and install_subdir</h2>
<p>The <a href="Reference-manual_functions.html#install_data"><ins><code>install_data()</code></ins></a>, <a href="Reference-manual_functions.html#install_headers"><ins><code>install_headers()</code></ins></a>, <a href="Reference-manual_functions.html#install_subdir"><ins><code>install_subdir()</code></ins></a> functions now
have an optional argument <code>follow_symlinks</code> that, if set to <code>true</code>, makes it so
symbolic links in the source are followed, rather than copied into the
destination tree, to match the old behavior.  The default, which is currently
to follow links, is subject to change in the future.</p>
<h2 id="added-fill-kwarg-to-intto_string">Added 'fill' kwarg to int.to_string()</h2>
<p>int.to_string() now accepts a <code>fill</code> argument. This allows you to pad the
string representation of the integer with leading zeroes:</p>
<pre><code class="language-meson">n = 4
message(n.to_string())
message(n.to_string(fill: 3))

n = -4
message(n.to_string(fill: 3))
</code></pre>
<p>OUTPUT:</p>
<pre><code class="language-meson">4
004
-04
</code></pre>
<h2 id="added-json-output_format-to-configure_file">Added 'json' output_format to configure_file()</h2>
<p>When no input file is specified, <a href="Reference-manual_functions.html#configure_file"><ins><code>configure_file()</code></ins></a> can now
generate a <code>json</code> file from given <a href="Reference-manual_returned_cfg_data.html"><ins><code>cfg_data</code></ins></a>.
Field descriptions are not preserved in the json file.</p>
<h2 id="global_source_root-and-dirname-in-machine-files">
<code>@GLOBAL_SOURCE_ROOT@</code> and <code>@DIRNAME@</code> in machine files</h2>
<p>Some tokens are now replaced in the machine file before parsing it:</p>
<ul>
<li>
<code>@GLOBAL_SOURCE_ROOT@</code>: the absolute path to the project's source tree</li>
<li>
<code>@DIRNAME@</code>: the absolute path to the machine file's parent directory.</li>
</ul>
<p>It can be used, for example, to have paths relative to the source directory, or
relative to toolchain's installation directory.</p>
<pre><code class="language-ini">[binaries]
c = '@DIRNAME@/toolchain/gcc'
exe_wrapper = '@GLOBAL_SOURCE_ROOT@' / 'build-aux' / 'my-exe-wrapper.sh'
</code></pre>
<h2 id="clangtidyfix-target">clang-tidy-fix target</h2>
<p>If <code>clang-tidy</code> is installed and the project's source root contains a
<code>.clang-tidy</code> (or <code>_clang-tidy</code>) file, Meson will automatically define
a <code>clang-tidy-fix</code> target that runs <code>run-clang-tidy</code> tool with <code>-fix</code>
option to apply the changes found by clang-tidy to the source code.</p>
<p>If you have defined your own <code>clang-tidy-fix</code> target, Meson will not
generate its own target.</p>
<h2 id="meson-compile-command-now-accepts-suffixes-for-target">Meson compile command now accepts suffixes for TARGET</h2>
<p>The syntax for specifying a target for meson compile is now
<code>[PATH_TO_TARGET/]TARGET_NAME.TARGET_SUFFIX[:TARGET_TYPE]</code> where
<code>TARGET_SUFFIX</code> is the suffix argument given in the build target
within meson.build. It is optional and <code>TARGET_NAME</code> remains
sufficient if it uniquely resolves to one single target.</p>
<h2 id="new-environment-variable-meson_package_cache_dir">New environment variable <code>MESON_PACKAGE_CACHE_DIR</code>
</h2>
<p>If the <code>MESON_PACKAGE_CACHE_DIR</code> environment variable is set, it is used instead of the
project's <code>subprojects/packagecache</code>. This allows sharing the cache across multiple
projects. In addition it can contain an already extracted source tree as long as it
has the same directory name as the <code>directory</code> field in the wrap file. In that
case, the directory will be copied into <code>subprojects/</code> before applying patches.</p>
<h2 id="update-options-with-meson-setup-builddir-doptvalue">Update options with <code>meson setup &lt;builddir&gt; -Dopt=value</code>
</h2>
<p>If the build directory already exists, options are updated with their new value
given on the command line (<code>-Dopt=value</code>). Unless <code>--reconfigure</code> is also specified,
this won't reconfigure immediately. This has the same behaviour as
<code>meson configure &lt;builddir&gt; -Dopt=value</code>.</p>
<p>Previous Meson versions were simply a no-op.</p>
<h2 id="clear-persistent-cache-with-meson-setup-clearcache">Clear persistent cache with <code>meson setup --clearcache</code>
</h2>
<p>Just like <code>meson configure --clearcache</code>, it is now possible to clear the cache
and reconfigure in a single command with <code>meson setup --clearcache --reconfigure &lt;builddir&gt;</code>.</p>
<h2 id="machine-files-pkgconfig-field-deprecated-and-replaced-by-pkgconfig">Machine files: <code>pkgconfig</code> field deprecated and replaced by <code>pkg-config</code>
</h2>
<p>Meson used to allow both <code>pkgconfig</code> and <code>pkg-config</code> entries in machine files,
the former was used for <code>dependency()</code> lookup and the latter was used as return
value for <code>find_program('pkg-config')</code>.</p>
<p>This inconsistency is now fixed by deprecating <code>pkgconfig</code> in favor of
<code>pkg-config</code> which matches the name of the binary. For backward compatibility
it is still allowed to define both with the same value, in that case no
deprecation warning is printed.</p>
<h2 id="support-targeting-pythons-limited-c-api">Support targeting Python's limited C API</h2>
<p>The Python module's <code>extension_module</code> function has gained the ability
to build extensions which target Python's limited C API via a new keyword
argument: <code>limited_api</code>.</p>
<h2 id="all-compiler-has_-methods-support-the-required-keyword">All compiler <code>has_*</code> methods support the <code>required</code> keyword</h2>
<p>Now instead of</p>
<pre><code class="language-meson">assert(cc.has_function('some_function'))
assert(cc.has_type('some_type'))
assert(cc.has_member('struct some_type', 'x'))
assert(cc.has_members('struct some_type', ['x', 'y']))
</code></pre>
<p>we can use</p>
<pre><code class="language-meson">cc.has_function('some_function', required: true)
cc.has_type('some_type', required: true)
cc.has_member('struct some_type', 'x', required: true)
cc.has_members('struct some_type', ['x', 'y'], required: true)
</code></pre>
<h2 id="deprecated-rust_crate_type-and-replaced-by-rust_abi">Deprecated <code>rust_crate_type</code> and replaced by <code>rust_abi</code>
</h2>
<p>The new <code>rust_abi</code> keyword argument is accepted by <a href="Reference-manual_functions.html#shared_library"><ins><code>shared_library()</code></ins></a>,
<a href="Reference-manual_functions.html#static_library"><ins><code>static_library()</code></ins></a>, <a href="Reference-manual_functions.html#library"><ins><code>library()</code></ins></a> and <a href="Reference-manual_functions.html#shared_module"><ins><code>shared_module()</code></ins></a> functions. It can be either
<code>'rust'</code> (the default) or <code>'c'</code> strings.</p>
<p><code>rust_crate_type</code> is now deprecated because Meson already knows if it's a shared
or static library, user only need to specify the ABI (Rust or C).</p>
<p><code>proc_macro</code> crates are now handled by the <a href="Rust-module.html#proc_macro"><code>rust.proc_macro()</code></a>
method.</p>
<h2 id="tests-now-abort-on-errors-by-default-under-sanitizers">Tests now abort on errors by default under sanitizers</h2>
<p>Sanitizers like AddressSanitizer and UndefinedBehaviorSanitizer do not abort
by default on detected violations. Meson now exports <code>ASAN_OPTIONS</code> and <code>UBSAN_OPTIONS</code>
when unset in the environment to provide sensible abort-by-default behavior.</p>
<h2 id="lang_sharedstatic_args-for-both_library-library-and-build_target">
<code>&lt;lang&gt;_(shared|static)_args</code> for both_library, library, and build_target</h2>
<p>We now allow passing arguments like <code>c_static_args</code> and <code>c_shared_args</code>. This
allows a <a href="Reference-manual_functions.html#both_libraries"><ins><code>both_libraries()</code></ins></a> to have arguments specific to either the shared or
static library, as well as common arguments to both.</p>
<p>There is a drawback to this, since Meson now cannot re-use object files between
the static and shared targets. This could lead to much higher compilation time
when using a <a href="Reference-manual_functions.html#both_libraries"><ins><code>both_libraries()</code></ins></a> if there are many sources.</p>
<h2 id="unified-message-strformat-and-fstring-formatting">Unified message(), str.format() and f-string formatting</h2>
<p>They now all support the same set of values: strings, integers, bools, options,
dictionaries and lists thereof.</p>
<ul>
<li>Feature options (i.e. enabled, disabled, auto) were not previously supported
by any of those functions.</li>
<li>Lists and dictionaries were not previously supported by f-string.</li>
<li>str.format() allowed any type and often resulted in printing the internal
representation which is now deprecated.</li>
</ul>
<h2 id="vs_module_defs-keyword-now-supports-indexes-of-custom_target">vs_module_defs keyword now supports indexes of custom_target</h2>
<p>This means you can do something like:</p>
<pre><code class="language-meson">defs = custom_target('generate_module_defs', ...)
shared_library('lib1', vs_module_defs : defs[0])
shared_library('lib2', vs_module_defs : defs[2])
</code></pre>
<h2 id="automatic-fallback-to-cmake-and-cargo-subproject">Automatic fallback to <code>cmake</code> and <code>cargo</code> subproject</h2>
<p>CMake subprojects have been supported for a while using the <code>cmake.subproject()</code>
module method. However until now it was not possible to use a CMake subproject
as fallback in a <code>dependency()</code> call.</p>
<p>A wrap file can now specify the method used to build it by setting the <code>method</code>
key in the wrap file's first section. The method defaults to <code>meson</code>.</p>
<p>Supported methods:</p>
<ul>
<li>
<code>meson</code> requires <code>meson.build</code> file.</li>
<li>
<code>cmake</code> requires <code>CMakeLists.txt</code> file. <a href="Wrap-dependency-system-manual.html#cmake-wraps">See details</a>.</li>
<li>
<code>cargo</code> requires <code>Cargo.toml</code> file. <a href="Wrap-dependency-system-manual.html#cargo-wraps">See details</a>.</li>
</ul>

    </div>
        




		
	</div>
	<div id="search_results">
		<p>The results of the search are</p>
	</div>
	<div id="footer">
		    
        
<hr>

<div class="license-description">
    Website licensing information are available on the <a href="legal.html">Legal</a> page.
</div>


	</div>
</div>

<div id="toc-column">
	
		<div class="edit-button">
		<a href="https://github.com/mesonbuild/meson/edit/master/docs/_build/Release-notes-for-1.3.0.md" data-hotdoc-role="edit-button">Edit on GitHub</a>

	</div>
		<div id="toc-wrapper">
		<nav id="toc"></nav>
	</div>
</div>
</div>
</main>


<script src="assets/js/navbar_offset_scroller.js"></script>
</body>
</html>
